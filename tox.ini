[tox]
env_list =
    py311
    py310
    py39
    py38
    py37
    py36
minversion = 4.2.8

[testenv:py311]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=6
    pyfakefs
    pytest-mock
    wmul_test_utils>=0.3.1
    wmul_logger>=0.5.1
    wmul_emailer>=0.5.0
    click
    mysql-connector-python
    cachetools
    protobuf>=3.19.0
commands =
    pytest {tty:--color=yes} {posargs}

[testenv:py310]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=6
    pyfakefs
    pytest-mock
    wmul_test_utils>=0.3.1
    wmul_logger>=0.5.1
    wmul_emailer>=0.5.0
    click
    mysql-connector-python
    cachetools
    protobuf>=3.19.0
commands =
    pytest {tty:--color=yes} {posargs}

[testenv:py39]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=6
    pyfakefs
    pytest-mock
    wmul_test_utils>=0.3.1
    wmul_logger>=0.5.1
    wmul_emailer>=0.5.0
    click
    mysql-connector-python
    cachetools
    protobuf>=3.19.0
commands =
    pytest {tty:--color=yes} {posargs}

[testenv:py38]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=6
    pyfakefs
    pytest-mock
    wmul_test_utils>=0.3.1
    wmul_logger>=0.5.1
    wmul_emailer>=0.5.0
    click
    mysql-connector-python
    cachetools
    protobuf>=3.19.0
commands =
    pytest {tty:--color=yes} {posargs}

[testenv:py37]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=6
    pyfakefs
    pytest-mock
    wmul_test_utils>=0.3.1
    wmul_logger>=0.5.1
    wmul_emailer>=0.5.0
    click
    mysql-connector-python
    cachetools
    protobuf>=3.19.0
commands =
    pytest {tty:--color=yes} {posargs}

[testenv:py36]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=6
    pyfakefs
    pytest-mock
    wmul_test_utils>=0.3.1
    wmul_logger>=0.5.1
    wmul_emailer>=0.5.0
    click
    mysql-connector-python<8.0.29
    cachetools
    protobuf<=3.19.4
    dataclasses
commands =
    pytest {tty:--color=yes} {posargs}